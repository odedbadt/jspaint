var n=this;function q(a,b){var c=a.split("."),f=n;c[0]in f||!f.execScript||f.execScript("var "+c[0]);for(var d;c.length&&(d=c.shift());)c.length||void 0===b?f[d]?f=f[d]:f=f[d]={}:f[d]=b}
function t(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"string"==typeof a}var v="closure_uid_"+(1E9*Math.random()>>>0),aa=0;function w(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}
function x(a,b){function c(){}c.prototype=b.prototype;a.$=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.aa=function(a,c,e){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};function z(){0!=ba&&(this[v]||(this[v]=++aa));this.b=this.b;this.s=this.s}var ba=0;z.prototype.b=!1;function A(a){A[" "](a);return a}A[" "]=function(){};var B=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function C(a,b){return a<b?-1:a>b?1:0};var D;a:{var E=n.navigator;if(E){var F=E.userAgent;if(F){D=F;break a}}D=""};function ca(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function da(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function ea(a){for(var b in a)return!1;return!0};function G(a,b){this.type=a;this.s=this.v=b}G.prototype.w=function(){};var H="closure_listenable_"+(1E6*Math.random()|0),fa=0;function ga(a,b,c,f,d){this.listener=a;this.b=null;this.src=b;this.type=c;this.B=!!f;this.f=d;this.M=++fa;this.A=this.D=!1}function ha(a){a.A=!0;a.listener=null;a.b=null;a.src=null;a.f=null};var I=Array.prototype,ia=I.indexOf?function(a,b,c){return I.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(u(a))return u(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ja=I.map?function(a,b,c){return I.map.call(a,b,c)}:function(a,b,c){for(var f=a.length,d=Array(f),e=u(a)?a.split(""):a,g=0;g<f;g++)g in e&&(d[g]=b.call(c,e[g],g,a));return d};function J(a,b,c,f){return a||b?a?b?K(L(M,a.m,b.m,c,f)):a:K(L(M,{},b.m,c,f)):null}function L(a,b,c,f,d){f=f||0;d=d||0;var e={},g;for(g in b){var h=a(b[Number(g)],c[Number(g)-d]||null,f);h&&(e[g]=h)}for(g in c)(h=a(b[Number(g)+d]||null,c[Number(g)],f))&&(e[Number(g)+d]=h);return e}function K(a){ca(a,function(a){for(var c=0;c<a.length;++c);});return ea(a)?null:{m:a,g:ka(a),N:la(a)}}
function ka(a){var b=Infinity,c=Infinity,f=-Infinity,d=-Infinity,e;for(e in a)Number(e)<c&&(c=Number(e)),Number(e)+1>d&&(d=Number(e)+1),0!=a[e].length&&(a[e][0]<b&&(b=a[e][0]),a[e][a[e].length-1]>f&&(f=a[e][a[e].length-1]));return b>=f||c>=d?null:{h:b,l:c,G:f,H:d}}function la(a){for(var b in a)if(2!=a[b].length)return!1;return!0}
function M(a,b,c){var f=c||0;if(null==a&&null==b)return null;if(null==a)return ja(b,function(a){return Number(a)+f});if(null==b)return a;if(2==a.length&&2==b.length)return ma(a,b,f);for(var d=c=0,e=0,g=[],h=!0;;)if(c<a.length&&(d>=b.length||d<b.length&&a[c]<b[d]+f))0==c%2?(0==e&&(g.push(a[c]),h=!1),e++):(e--,0==e&&(g.push(a[c]),h=!1)),c++;else if(c<a.length&&d<b.length&&a[c]==b[d]+f)c%2==d%2&&(g.push(a[c]),h=!1,e=(c+1)%2+(d+1)%2),c++,d++;else if(d<b.length)0==d%2?(0==e&&(g.push(b[d]+f),h=!1),e++):
(e--,0==e&&(g.push(b[d]+f),h=!1)),d++;else break;return h?null:g}function ma(a,b,c){return a||b?b?a?a[1]<b[0]+c?[a[0],a[1],b[0]+c,b[1]+c]:b[1]+c<a[0]?[b[0]+c,b[1]+c,a[0],a[1]]:[Math.min(a[0],b[0]+c),Math.max(a[1],b[1]+c)]:[b[0]+c,b[1]+c]:a:null};var na=-1!=D.indexOf("Opera")||-1!=D.indexOf("OPR"),N=-1!=D.indexOf("Trident")||-1!=D.indexOf("MSIE"),oa=-1!=D.indexOf("Edge"),O=-1!=D.indexOf("Gecko")&&!(-1!=D.toLowerCase().indexOf("webkit")&&-1==D.indexOf("Edge"))&&!(-1!=D.indexOf("Trident")||-1!=D.indexOf("MSIE"))&&-1==D.indexOf("Edge"),P=-1!=D.toLowerCase().indexOf("webkit")&&-1==D.indexOf("Edge");
function pa(){var a=D;if(O)return/rv\:([^\);]+)(\)|;)/.exec(a);if(oa)return/Edge\/([\d\.]+)/.exec(a);if(N)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(P)return/WebKit\/(\S+)/.exec(a)}function ra(){var a=n.document;return a?a.documentMode:void 0}var sa=function(){if(na&&n.opera){var a=n.opera.version;return"function"==t(a)?a():a}var a="",b=pa();b&&(a=b?b[1]:"");return N&&(b=ra(),b>parseFloat(a))?String(b):a}(),ta={};
function Q(a){var b;if(!(b=ta[a])){b=0;for(var c=B(String(sa)).split("."),f=B(String(a)).split("."),d=Math.max(c.length,f.length),e=0;0==b&&e<d;e++){var g=c[e]||"",h=f[e]||"",k=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var m=k.exec(g)||["","",""],p=l.exec(h)||["","",""];if(0==m[0].length&&0==p[0].length)break;b=C(0==m[1].length?0:parseInt(m[1],10),0==p[1].length?0:parseInt(p[1],10))||C(0==m[2].length,0==p[2].length)||C(m[2],p[2])}while(0==b)}b=ta[a]=0<=b}return b}
var ua=n.document,va=ua&&N?ra()||("CSS1Compat"==ua.compatMode?parseInt(sa,10):5):void 0;!O&&!N||N&&9<=va||O&&Q("1.9.1");N&&Q("9");function R(a){this.src=a;this.b={};this.f=0}R.prototype.hasListener=function(a,b){var c=void 0!==a,f=c?a.toString():"",d=void 0!==b;return da(this.b,function(a){for(var g=0;g<a.length;++g)if(!(c&&a[g].type!=f||d&&a[g].B!=b))return!0;return!1})};var wa=!N||9<=va,xa=N&&!Q("9");!P||Q("528");O&&Q("1.9b")||N&&Q("8")||na&&Q("9.5")||P&&Q("528");O&&!Q("8")||N&&Q("9");function S(a,b){G.call(this,a?a.type:"");this.s=this.v=null;this.clientY=this.clientX=this.j=this.f=0;this.b=null;a&&this.F(a,b)}x(S,G);
S.prototype.F=function(a,b){this.type=a.type;this.v=a.target||a.srcElement;this.s=b;var c=a.relatedTarget;if(c&&O)try{A(c.nodeName)}catch(f){}this.f=P||void 0!==a.offsetX?a.offsetX:a.layerX;this.j=P||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.b=a;a.defaultPrevented&&this.w()};
S.prototype.w=function(){S.$.w.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,xa)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var T="closure_lm_"+(1E6*Math.random()|0),U={},ya=0;
function za(a,b,c,f,d){if("array"==t(b)){for(var e=0;e<b.length;e++)za(a,b[e],c,f,d);return null}c=Aa(c);if(a&&a[H])a=V(a,b,c,f,d);else{e=c;if(!b)throw Error("Invalid event type");c=!!f;var g=W(a);g||(a[T]=g=new R(a));var h=g,k=b.toString(),g=h.b[k];g||(g=h.b[k]=[],h.f++);var l;b:{for(l=0;l<g.length;++l){var m=g[l];if(!m.A&&m.listener==e&&m.B==!!f&&m.f==d)break b}l=-1}-1<l?(f=g[l],f.D=!1):(f=new ga(e,h.src,k,!!f,d),f.D=!1,g.push(f));if(!f.b){d=Ba();f.b=d;d.src=a;d.listener=f;if(a.addEventListener)a.addEventListener(b.toString(),
d,c);else if(a.attachEvent)a.attachEvent(Ca(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");ya++}a=f}return a}function Ba(){var a=Da,b=wa?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Ca(a){return a in U?U[a]:U[a]="on"+a}function Ea(a,b,c,f){var d=!0;if(a=W(a))if(b=a.b[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var e=b[a];e&&e.B==c&&!e.A&&(e=Fa(e,f),d=d&&!1!==e)}return d}
function Fa(a,b){var c=a.listener,f=a.f||a.src;if(a.D&&"number"!=typeof a&&a&&!a.A){var d=a.src;if(d&&d[H])d.fa(a);else{var e=a.type,g=a.b;d.removeEventListener?d.removeEventListener(e,g,a.B):d.detachEvent&&d.detachEvent(Ca(e),g);ya--;if(e=W(d)){var g=a.type,h;if(h=g in e.b){h=e.b[g];var k=ia(h,a),l;(l=0<=k)&&I.splice.call(h,k,1);h=l}h&&(ha(a),0==e.b[g].length&&(delete e.b[g],e.f--));0==e.f&&(e.src=null,d[T]=null)}else ha(a)}}return c.call(f,b)}
function Da(a,b){if(a.A)return!0;if(!wa){var c;if(!(c=b))a:{c=["window","event"];for(var f=n,d;d=c.shift();)if(null!=f[d])f=f[d];else{c=null;break a}c=f}d=c;c=new S(d,this);f=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=c.s;e;e=e.parentNode)d.push(e);for(var e=a.type,h=d.length-1;0<=h;h--){c.s=d[h];var k=Ea(d[h],e,!0,c),f=f&&k}for(h=0;h<d.length;h++)c.s=d[h],k=Ea(d[h],e,!1,c),
f=f&&k}return f}return Fa(a,new S(b,this))}function W(a){a=a[T];return a instanceof R?a:null}var X="__closure_events_fn_"+(1E9*Math.random()>>>0);function Aa(a){if("function"==t(a))return a;a[X]||(a[X]=function(b){return a.handleEvent(b)});return a[X]};function Y(a){z.call(this);this.f=a;this.j={}}x(Y,z);var Ga=[];function V(a,b,c,f,d){"array"!=t(c)&&(c&&(Ga[0]=c.toString()),c=Ga);for(var e=0;e<c.length;e++){var g=za(b,c[e],f||a.handleEvent,d||!1,a.f||a);if(!g)break;a.j[g.M]=g}return a}Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Ha(a){var b=document;return u(a)?b.getElementById(a):a};var Z={F:function(){var a=new Y,b,c={};b=Math.floor(10);for(var f=-b;f<=b;++f){var d=Math.round(Math.sqrt(100-f*f));0<d&&(c[f]=[-d,d])}b=K(c);c=Ha("single-canvas");b={o:0,cursor:b,ca:a,canvas:c,ba:Ha("dbg-canvas"),da:{i:null,g:null}};Z.ea=b;V(a,c,"mousemove",w(Z.S,b),void 0);V(a,document,"mousedown",w(Z.R,b),void 0);V(a,document,"mouseup",w(Z.V,b),void 0);V(a,document,"mouseover",w(Z.U,b),void 0);V(a,document,"mouseout",w(Z.T,b),void 0);V(a,c,"touchstart",w(Z.Y,b),void 0);V(a,c,"touchmove",w(Z.X,
b),void 0);V(a,c,"touchend",w(Z.W,b),void 0);V(a,document,"keypress",w(Z.P,b),void 0);Z.J(b)},I:[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[0,255,255]]};Z.Z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};Z.J=function(a){var b=Z.Z;b(w(Z.J,a));Z.L(a)};Z.R=function(a,b){a.C=!0;b.v==a.canvas&&(a.a=J(null,a.cursor,b.f-(a.a&&a.a.g&&a.a.g.h||0),b.j-(a.a&&a.a.g&&a.a.g.l||0)),a.u=a.a,a.c=[[b.f,b.j]])};
Z.S=function(a,b){b.b.buttons&&a.c.push([b.f,b.j])};Z.V=function(a){a.C=!1;a.u=a.a;a.i=J(a.i,a.a);a.c=[]};Z.P=function(a){a.o+=1;a.o=a.o%Z.I.length};Z.U=function(a,b){a.C=!0;b.v==a.canvas&&(a.a=J(null,a.cursor,b.f-(a.a&&a.a.g&&a.a.g.h||0),b.j-(a.a&&a.a.g&&a.a.g.l||0)),a.u=a.a,a.c=[b.f,b.j])};Z.T=function(a){a.C=!1;a.i=J(a.i,a.a);a.u=a.a;a.c=[]};
Z.Y=function(a,b){b.w();a.c=[];a.a&&(a.i=J(a.i,a.a));var c=b.b.touches,f=a.a;if(!(1<c.length)){for(var d=0;d<c.length;++d){var e=c[d];a.c=[[Math.floor(e.clientX),Math.floor(e.clientY)]]}a.a=f;a.u=a.a}};Z.X=function(a,b){var c=[Math.round(b.b.touches[0].clientX),Math.round(b.b.touches[0].clientY)];a.c.push(c)};Z.W=function(a,b){b.w();a.C=!1;a.i[a.o]=J(a.i[a.o],a.a);a.a=null;a.u=a.a};
Z.L=function(a){var b,c;if(a.c&&0!=a.c.length){var f=Z.K(a);a.O=a.c[a.c.length-1];a.c=[];if(f){c=f.g;var d=J(a.a,f);J(null,f);f=J(a.i,d);b={};for(var e in f.m)if(!(e<c.l||e>=c.H)){var g;g=f.m[e];var h=c.h,k=c.G;if(g){for(var l=[],m=!1,p=!1,y=0;y<g.length;++y){var r=g[y];!p&&r>=h&&(m?r<k?r>h&&(l.push(h),l.push(r)):(l.push(h),l.push(k)):(r<k||r<=k&&m)&&l.push(r));p&&(r>k?m&&l.push(k):(r<k||r<=k&&m)&&l.push(r));p=r>=h&&r<k;if(r>=k)break;m=!m}g=0==l.length?null:l}else g=null;g&&(b[e]=g)}b=K(b);a.a=d;
d=a.canvas.getContext("2d");e=c.G-c.h;f=d.createImageData(e,c.H-c.l);b=b.m;a=Z.I[a.o];for(var qa in b)for(g=Number(qa)-c.l,h=b[Number(qa)],k=0;k<h.length;k+=2)for(l=h[k]-c.h;l<h[k+1]-c.h;++l)f.data[4*(e*g+l)+0]=a[0],f.data[4*(e*g+l)+1]=a[1],f.data[4*(e*g+l)+2]=a[2],f.data[4*(e*g+l)+3]=255;d.fillStyle="rgba(255, 0, 0, 0.3)";d.putImageData(f,c.h,c.l);d.fillRect(c.h,c.l,c.G-c.h,c.H-c.l)}}};
Z.K=function(a){for(var b=null,c=a.O||a.c[0],f=0;f<a.c.length;++f){var d,e=a.cursor;d=e.N?ma:M;var g=c[0],h=c[1],c=a.c[f][0],k=a.c[f][1],l={},m=g,p=h,y=e.m;if(g==c&&h==k)d=J(null,e,g,h);else{if(Math.abs(c-g)>Math.abs(k-h))if(g<c)for(e=1,g=(k-h)/(c-g);m<=c;)l=L(d,l,y,Math.round(m),Math.round(p)),m+=e,p+=g;else for(e=-1,g=-(k-h)/(c-g);m>=c;)l=L(d,l,y,Math.round(m),Math.round(p)),m+=e,p+=g;else if(h<k)for(e=(c-g)/(k-h),g=1;p<=k;)l=L(d,l,y,Math.round(m),Math.round(p)),m+=e,p+=g;else for(e=-(c-g)/(k-h),
g=-1;p>=k;)l=L(d,l,y,Math.round(m),Math.round(p)),m+=e,p+=g;d=K(l)}b=J(b,d);c=a.c[f]}return b};q("fixel.jspaint.SquarePaint",Z);q("fixel.jspaint.SquarePaint.init",Z.F);
